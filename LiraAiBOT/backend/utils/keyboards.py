"""
–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏ Telegram.
"""
from typing import List, Dict, Any


def create_main_menu_keyboard() -> Dict[str, Any]:
    """
    –°–æ–∑–¥–∞—ë—Ç –æ—Å–Ω–æ–≤–Ω—É—é reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ä–µ–∂–∏–º–∞–º–∏.
    
    Returns:
        JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è Telegram API
    """
    keyboard = {
        "keyboard": [
            [
                {"text": "üí¨ –¢–µ–∫—Å—Ç"},
                {"text": "üé§ –ì–æ–ª–æ—Å"}
            ],
            [
                {"text": "üì∏ –§–æ—Ç–æ"},
                {"text": "üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è"}
            ],
            [
                {"text": "ü§ñ –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å"},
                {"text": "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}
            ],
            [
                {"text": "‚ùì –ü–æ–º–æ—â—å"}
            ],
            [
                {"text": "‚¨áÔ∏è –°–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É"}
            ]
        ],
        "resize_keyboard": True,  # –ü–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
        "one_time_keyboard": False,  # –û—Å—Ç–∞—ë—Ç—Å—è –≤–∏–¥–∏–º–æ–π –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
        "input_field_placeholder": "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç"
    }
    return keyboard


def create_inline_keyboard(buttons: List[List[Dict[str, str]]]) -> Dict[str, Any]:
    """
    –°–æ–∑–¥–∞—ë—Ç inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º).
    
    Args:
        buttons: –°–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫–æ–≤ –∫–Ω–æ–ø–æ–∫ [[{"text": "...", "callback_data": "..."}]]
    
    Returns:
        JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è Telegram API
    """
    return {
        "inline_keyboard": buttons
    }


def create_hide_keyboard() -> Dict[str, Any]:
    """
    –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
    
    Returns:
        JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    """
    return {
        "remove_keyboard": True
    }


# –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
BOT_MODES = {
    "text": "üí¨ –¢–µ–∫—Å—Ç",
    "voice": "üé§ –ì–æ–ª–æ—Å",
    "photo": "üì∏ –§–æ—Ç–æ",
    "generation": "üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è",
    "help": "‚ùì –ü–æ–º–æ—â—å",
    "auto": "ü§ñ –ê–≤—Ç–æ",  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
    "select_model": "ü§ñ –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å",
    "hide": "‚¨áÔ∏è –°–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É",
    "stats": "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
}


def create_model_selection_keyboard() -> Dict[str, Any]:
    """
    –°–æ–∑–¥–∞—ë—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏.

    Returns:
        JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è Telegram API
    """
    keyboard = {
        "keyboard": [
            [
                {"text": "üöÄ Groq Llama 3.3"},
                {"text": "ü¶ô Groq Llama 4"}
            ],
            [
                {"text": "üîç Groq Scout"},
                {"text": "üåô Groq Kimi K2"}
            ],
            [
                {"text": "‚ö° Cerebras Llama 3.1"},
                {"text": "üß† Cerebras Qwen 3"}
            ],
            [
                {"text": "‚òÄÔ∏è Solar"},
                {"text": "üî± Trinity"}
            ],
            [
                {"text": "ü§ñ GLM-4.5"}
            ],
            [
                {"text": "‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –º–µ–Ω—é"}
            ]
        ],
        "resize_keyboard": True,
        "one_time_keyboard": False,
        "input_field_placeholder": "–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å"
    }
    return keyboard


def get_mode_from_button(text: str) -> str:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º –ø–æ —Ç–µ–∫—Å—Ç—É –∫–Ω–æ–ø–∫–∏.
    
    Args:
        text: –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üí¨ –¢–µ–∫—Å—Ç")
    
    Returns:
        –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "text")
    """
    mode_map = {v: k for k, v in BOT_MODES.items()}
    return mode_map.get(text, "auto")


def get_model_from_button(text: str) -> str:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–æ–¥–µ–ª—å –ø–æ —Ç–µ–∫—Å—Ç—É –∫–Ω–æ–ø–∫–∏.

    Args:
        text: –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üöÄ Groq Llama 3.3")

    Returns:
        ID –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "groq-llama")
    """
    model_map = {
        # Groq –º–æ–¥–µ–ª–∏
        "üöÄ Groq Llama 3.3": "groq-llama",
        "ü¶ô Groq Llama 4": "groq-maverick",
        "üîç Groq Scout": "groq-scout",
        "üåô Groq Kimi K2": "groq-kimi",
        # Cerebras –º–æ–¥–µ–ª–∏
        "‚ö° Cerebras Llama 3.1": "cerebras-llama",
        "üß† Cerebras Qwen 3": "cerebras-qwen",
        # OpenRouter –º–æ–¥–µ–ª–∏
        "‚òÄÔ∏è Solar": "solar",
        "üî± Trinity": "trinity",
        "ü§ñ GLM-4.5": "glm"
    }
    return model_map.get(text, None)


def get_mode_prompt(mode: str) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è —Ä–µ–∂–∏–º–∞.
    
    Args:
        mode: –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞
    
    Returns:
        –¢–µ–∫—Å—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏
    """
    prompts = {
        "text": "üí¨ **–†–µ–∂–∏–º —Ç–µ–∫—Å—Ç–∞**\n\n–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ —è –æ—Ç–≤–µ—á—É!",
        "voice": "üé§ **–ì–æ–ª–æ—Å–æ–≤–æ–π —Ä–µ–∂–∏–º**\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ —è —Ä–∞—Å–ø–æ–∑–Ω–∞—é –µ–≥–æ!",
        "photo": "üì∏ **–†–µ–∂–∏–º —Ñ–æ—Ç–æ**\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ, –∏ —è –µ–≥–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é!",
        "generation": "üé® **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**\n\n–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å!",
        "help": "‚ùì **–ü–æ–º–æ—â—å**\n\n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /help –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.",
        "auto": "ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º**\n\n–Ø —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—é, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å!",
        "select_model": "ü§ñ **–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ!",
        "hide": "‚¨áÔ∏è –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /menu —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å.",
        "stats": "üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**\n\n–ü–æ–∫–∞–∑—ã–≤–∞—é –≤–∞—à—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É..."
    }
    return prompts.get(mode, "")
