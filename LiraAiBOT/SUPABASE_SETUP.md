# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è LiraAI Bot

## üìã –®–∞–≥ 1: SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤ Supabase Dashboard

1. –ó–∞–π–¥–∏ –≤ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç: `xmdvjrgpqqdoofamkzut`
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **SQL Editor** (–ª–µ–≤–æ–µ –º–µ–Ω—é)
4. –ù–∞–∂–º–∏ **New Query**
5. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase_migration.sql`
6. –í—Å—Ç–∞–≤—å –≤ SQL Editor –∏ –Ω–∞–∂–º–∏ **Run**

---

## üîë –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞

1. –í Supabase Dashboard –ø–µ—Ä–µ–π–¥–∏ –≤ **Settings** (—à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞ –≤–Ω–∏–∑—É)
2. –í—ã–±–µ—Ä–∏ **API**
3. –°–∫–æ–ø–∏—Ä—É–π **anon/public** –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`)

---

## ‚öôÔ∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–î–æ–±–∞–≤—å SUPABASE_KEY –≤ —Ñ–∞–π–ª `.env`:

```bash
# === SUPABASE (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) ===
SUPABASE_URL=https://xmdvjrgpqqdoofamkzut.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...  # –≤—Å—Ç–∞–≤—å —Å–≤–æ–π –∫–ª—é—á
USE_SUPABASE=true  # –≤–∫–ª—é—á–∏—Ç—å Supabase
```

---

## üì¶ –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞

```bash
pip install supabase
```

–ò–ª–∏ –æ–±–Ω–æ–≤–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

---

## üöÄ –®–∞–≥ 5: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ SQLite

–ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
python migrate_to_supabase.py
```

–°–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å—ë—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ SQLite –≤ Supabase
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å—ë—Ç –ª–∏–º–∏—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å—ë—Ç –∏—Å—Ç–æ—Ä–∏—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å—ë—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

---

## ‚úÖ –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:

```
SQLite –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 10
Supabase –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 10
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!
```

---

## üîÑ –®–∞–≥ 7: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
pm2 restart all  # –∏–ª–∏ —Ç–≤–æ—é –∫–æ–º–∞–Ω–¥—É

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs
```

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ Supabase –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ Supabase –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: https://xmdvjrgpqqdoofamkzut.supabase.co
```

---

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase:
- ‚úÖ –í—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –±–æ—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–π + —Å–µ—Ä–≤–µ—Ä) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â—É—é –±–∞–∑—É
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üîß –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ SQLite (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–í `.env` —É—Å—Ç–∞–Ω–æ–≤–∏:

```bash
USE_SUPABASE=false
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ë—Ç—Å—è –∫ SQLite.

---

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è Supabase

```sql
-- –ü–æ—Å—á–∏—Ç–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT COUNT(*) FROM users;

-- –ü–æ—Å—á–∏—Ç–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É—Ä–æ–≤–Ω—è–º –¥–æ—Å—Ç—É–ø–∞
SELECT access_level, COUNT(*) FROM users GROUP BY access_level;

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT * FROM users ORDER BY created_at DESC LIMIT 10;

-- –ü–æ—Å—á–∏—Ç–∞—Ç—å –≤—Å–µ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
SELECT SUM(total_count) FROM generation_limits;

-- –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
DELETE FROM generation_history WHERE created_at < NOW() - INTERVAL '30 days';
```
